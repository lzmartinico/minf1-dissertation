\section{The chatbot revolution}
Much has been said about how the rapid reduction in cost of the semiconductor has changed the world in a significant way in the last 60 years. The rapid spread of inexpensive and energy efficient computers, networks, and storage facilities, has revolutionised the way we access information, exchange goods and services, and communicate with one another. The proliferation of the smartphone, specifically, has brought forth an explosion in the amount of information generated globally, with more than two thirds of the world population owning one \cite{wearesocial}. Adults in the United Kingdom spend an average of 2 hours per day interacting with their phones, browsing the web, using applications, generating tracking data, and chatting, the latter being one of the most popular applications, with 42\% of mobile users \cite{mobilesocial} being active on social media. The top downloaded messaging applications, as of January 2018, are \textit{Messenger} and \textit{WhatsApp} (1.3 billion active users each), both owned by \textit{Facebook}, and \textit{WeChat} (980 million), owned by China-based \textit{Tencent} \cite{mobilestatista}.

Besides keeping up with friends and professional contacts, business transactions are also conducted through chat, either arranging sale and delivery of goods, or for customer assistance, the former being much more prevalent in Asia, where most medium and large size companies, as well as some smaller ones, have a WeChat presence and conduct what is known as \textit{conversational commerce}. Increasingly, many of these transactions are being automated through the deployment of \textit{chatbots} (bots), an evolution of classic conversational interfaces that have become popular in the last decade for commercial and entertainment applications \cite{Dale2016}. The most popular bot platform outside China is Facebook Messenger, which introduced the functionality to developers in April 2016 \cite{Messenger2016}, and it has since taken off with more than 200,000 bots on the platform as of December 2017 \cite{Messenger2017}. The development of Voice Assistants such as Google Assistant, Siri, Cortana, Alexa, or open-sourced Mycroft \footnote{https://mycroft.ai}, have also pushed the deployment and popularity of conversational interfaces, either through voice or textual input. But if the above mentioned technologies try to be a general purpose digital assistant, most chatbots are typically concerned with a smaller domain problem, such as booking flights, checking the status of a bus, or telling a simple story \cite{meisel}.
\subsection{Natural Language technologies}
The recent uptick in chatbot usage can not be attributed only to marketing, but also to significant advances in Natural Language Processing (NLP) and Natural Language Understanding (NLU). 
While early chatbot implementations relied on simple pattern matching rules based on recognition of specific words (entity recognition) or part-of-speech (POS tagging), most of today's chatbot frameworks can leverage large corpora to apply machine learning algorithms, such as Intent analysis. Conversation can follow a slot, or a flow model: the latter is a hardcoded scripted flow diagram that guides the user through a preset conversation; the former specifies ``slots'' that contain some data the developer is interested in, and the chatbot will use NLP techniques to fill the slots from conversations with the user. Responses are typically pre-written and matched to an intent, but advances in deep learning are opening up possibilities for generative models, which create the answer from scratch \cite{Gregori}. Particularly successful can be combinations of several approaches, such as Serban et al. (2017)\cite{Serban2017}'s use of reinforcement learning to combine the approach of a generative deep learning model and a template-based retrieval model. Critical to the success of the chatbot is a good context management system, to ensure that a multi-turn conversation doesn't feel disjointed, and that previously entered information remains available to the chatbot throughout the session. All of this functionality is implemented by a growing variety of open source and commercial tools available today \cite{JavierCouto}.
\subsection{Chatbot use cases}
From a service provider's perspective, the potential of using a chatbot instead of a human to provide customer service or present content can be very appealing, offering the opportunity of automating repetitive tasks. A successful example of a chatbot deployed in a classroom setting is Georgia Tech's \textit{Jill Watson}, which complemented a team of Teaching Assistants to answer questions on a high traffic class forum \cite{Eicher2016}. But if chatbots can decrease the load for a smaller team, and improve customer experience by decreasing response times, they can also cause increases in customer dissatisfaction. In fact, conversational skills and friendliness are important elements when interacting with a customer service representative \cite{Kang2013}. Within these interactions, a particular emphasis on tone should be given \cite{morris1988many}, an aspect of conversation that until recently had not been developed in bots \cite{Hu2018}. While a complete replacement of humans in customer service roles is still far off, and would cause concern for the livelihood of a still large number of workers, chatbots are likely to soon be adopted by more companies to deal with clients' initial queries, while having a human agent supervise the conversation and be ready to intervene when necessary. \\
The centralization of services under a single interface might also address the phenomenon of ``app fatigue'': smartphone owners are no longer installing new apps, and when they do retention rates are abysmal \cite{appfatigue}. While giving up apps for chatbots might limit some kinds of deeper integration into users' devices, it also significantly increases the company's reach to everyone who is registered on a messaging platform, rather than the few who will choose to install new software. 

Chatbot users report their main motivation to be the increase in productivity in information retrieval tasks, compared to installing an app, scanning a long webpage, or placing a phone call, as well as the possibility of receiving customised replies based on their own preferences \cite{10.1007/978-3-319-70284-1_30}. The decrease in attention spans in younger generations \cite{Wilmer2017} and addictive design might explain why young users of social media crave immediate feedback \cite{brandtzaeg2016should}. Thus, as a synchronous form of communication, chat might be perceived to increase productivity over an asynchronous medium like email, and is reflected in users favouring conciseness in the chatbot's personality \cite{10.1007/978-3-319-67744-6_28}. \\
Other reasons for people to use chatbots, to a lesser extent, are the entertainment value, the social aspect of conversation, and the novelty value, with users actively selecting chatbots as a tool because they fulfil some form of psychological pleasure, according to the \textit{use and gratification} theory \cite{10.1007/978-3-319-70284-1_30}.
\subsection{A new User Interface}
Given the necissity of using chatbots productively, user needs will cause significant consequences for the field of Human-Computer Interaction (HCI): new paradigms of interface design will have to be invented, and novel approaches to combine different types of output will be possible \cite{FÃ¸lstad2017}. Undoubtedly, conversational interfaces provide a great advantage to the less tech-savvy, who might have trouble understanding the user interfaces of many bespoke applications, but will already be familiar to the ``unifying'' chat window, a philosophy promoted as Zero UI \cite{zeroui}. The blank canvas offered by the chat interface offers an unlimited potential for User Interface Design, to the point that, if the chatbot application is aware of enough information about its users, it might be able to create personalised interaction tailored to their preferences. Doing so may alleviate the growing digital divide that some segments of the population experience, because of the implicit biases of tech companies' employees when designing user experience without considering people who are less comfortable around computers \cite{Brandtzaeg2011}.
\section{Advances in m-health}
Since the earliest days of chatbots, such as Eliza, which was modelled after a Rogerian psychotherapist \cite{weizenbaum1966eliza}, it is clear that conversational agents can have significant impact on health. Their applications, however, initially remained limited, in part because of the restriction of having to teletype into an inaccessible computer, but mostly because the still primitive state of the technology made freeform chatting, and, crucially, the ability to understand anything about mental health, impossible. \\
More recently, the development of cheap sensors and widespread connectivity through smartphones has spurned a growing sector of m-health applications. From the 2000s, mobile phone use made doctor-patient communication quicker and more frequent, as well as enabling some initial forms of monitoring and providing a hub for Body Area Network, including different medical sensors \cite{Patrick2008}. The 2010s have seen further developments for these usages, and also the advance of "Artificial Intelligent" applications. These are made possible by the vast quantities of data that can be collected through mobile devices, as well as advances of other Computer Science and Engineering disciplines, such as image recognition, virtual reality, robotics, drones, 3D-printing, and the Internet of Things (IoT) being applied to the medical field \cite{Pistorius2017}. \\
The vast quantities of data being collected have helped to advance the state of the art on several medicinal application - but they also provide a valuable monetisable resource, both from the perspective of Big Data analysis, and for the number of for-profit advertising companies that will sell medical information to marketers and insurance companies \cite{tanner2016}. And whenever personal data is put online, it will also attract hackers, who might be interested in patient data for its resale value on the black market and for identity theft \cite{hackercare}. The sensitive nature of this kind of information makes it difficult to operate without breaking patient confidentiality, since anonymised medical records can be re-identified by correlating with outside sources \cite{Sweeney2001}, and even large experienced medical institution and data collection companies can breach existing regulations \cite{deepmindnhs}. 
\subsection{The Quantified Self}
Smartphone and wearable device users have also been collecting their own personal information, giving birth to the idea of the Quantified Self, or Personal Informatics \cite{rapp2014}.
Much of the Quantified Self movement is based on the idea that the automation of data gathering will lead to greater insight and improve our own health and behaviours by making us reflect and evaluate our past experiences. Data collection for Quantified Self purposes in activity and sleep tracking has boomed in the last decade, with the proliferation of inexpensive inertial measurement units and heartrate monitor sensors combined in a wristworn factor, as well as step counting applications being bundled in many smartphones \cite{Crawford2015}.\\
Rivera-Pelayo et al. (2012)\cite{Rivera-Pelayo2012} propose a framework necessary for a self tracking app, based on the three activities of tracking cues, triggering and recall.
Tracking can be done through software logging or hardware sensors. Triggering can be active, when the user is prompted to reflect in a suitable context, or passive, where the information is simply displayed in a location the user can observe and notice significant changes. Recalling can be aided through different techniques, which usually involve a considerable amount of post-processing, enhanced by access to large datasets. There is still much work that could be done in the area of contextualization, by associating the collected data with other sources, and data fusion, comparing your own data with independent self or peer reporting, as well as better data visualization in attractive and intuitive ways.

One example where the Quantified Self phenomenon can have a real impact is preventive medicine, promoting healthy lifestyle to alleviate future medical issues. Diet, in particular, has been shown to benefit from open ended food-logging more than other methodologies \cite{Bingham1994}. While Turner-McGrievy et al. (2013)\cite{Turner-McGrievy2013} found little advantage in replacing a paper diet tracking system with a mobile application, Personal Activity trackers in their study did receive an advantage; this leads to speculation that the lack of improvement in the first group might have been caused by the diet tracker's UX. In fact, using the My Meal Mate app over a 6-month trial, Carter et al. (2013)\cite{carter2013adherence} reported increased adherence, usage, convenience, social usability, and overall satisfaction compared to traditional diet tracking. 

Good examples of currently active commercial Quantified Self apps for fitness and nutrition are MyFitnessPal \cite{mfpwebsite} and Google Fit \cite{googlefitwebsite}, whose designs have been shown \cite{Suzianti2017} to prioritize continuance intention (the willingness to continue using the app), usability qualities (directness, informativeness, learnability, efficiency and simplicity), and user value features (satisfaction, customer need, attachment, pleasure and sociability). The usability of these interfaces, which include both a textual input and a barcode scanner for commercial products, has increased the number of DIY food loggers \cite{Alonso2015}; however, there is still some friction to a seamless logging experience \cite{Boushey2016}. \\
The output of fitness tracking apps is also of questionable usefulness: using calories as a primary metric is an oversimplification, as different kind of foods provide more nutritional value for the same caloric amount \cite{webmdcalories}. This might mislead a user in consuming more food than they should be, just to hit their calorie goal, or to leave some essential nutrient off their table, which can have negative consequence on overall health and impact their weight goals. In fact, Hebden et al. (2014)\cite{hebden2014} reports that user engagement with m-health food logging solutions tapered off after a month of sustained use. Within the study, patients were most engaged by the text messaging component of the food logging system: this suggests that some of the issues with current interfaces might be alleviated by the use of a chatbot. 
\subsection{Medical chatbots} 
Chatbots have been speculated to provide a useful tool as a behavioural intervention technology, used to complement human practitioners in reaching a larger number of users and automate personalised messages \cite{Gabrielli2017}. Experimental and clinical trials using simpler informational chatbots have been made in various medical fields, such as counselling \cite{Cameron}, mental health intervention \cite{Elmasri2012} and sexual health information \cite{Brixey2017}, generally providing positive results, or at least giving indication that the medium might be used to address the specific issues. \\
Among the more successful experiments in Behavioural Health Intervention, the \textit{MobileCoach} open-source platform \cite{mobilecoacheu} was originally designed as a text messaging based system, which did some parsing on the backend but mostly relied on practitioner's interventions. It has now been redesigned as a full fledged online chat platform, which was perceived positively in clinical trials where participants treated for obesity interacted with a chatbot that exhibited a distinct personality \cite{Kowatsch2017}.

One successful attempt at making a dietary tracking chatbot is Forksy \cite{forksywebsite}, which seems to be still actively developed, but there are no statistics on its usage and success rates. From direct experience, Forksy is very aggressive with its reminders to log your meals, and effectively displays the food diary through a graphical interface, but seems to have no ``smart'' features, and is inconsistent with the quality of its parsing.
\section{Making a smart chatbot application}
As researchers in many other fields in Computer Science are realising in the last decade, the collection of large quantities of data can have other uses besides record keeping, by leveraging the booming fields of machine learning and data science. This could eventually lead to make a truly useful chatbot, which in the future could replace or complement professional dietitians in a larger measure than today's solutions. 
\subsection{Nutritional knowledge}
Ever since Richards (1902)\cite{Richards1902a}, attempts have been made to algorithmically use food composition values to maximise food value per money spent. However, as Richards herself notes, "we know too little of the effect on digestibility, of cooking, and of the combination of two or more foods in one dish, or at one meal, to permit of very close calculation". \\
Even a century later, nutritional science still struggles to establish criteria to categorise individual food as ``good'' or ``bad'', because of the large number of nutrients each is made up of \cite{USDAFoodandNutritionService2007}. While dietary guidelines exist based on nutrients rather than foods, they often fail to be effective, because of the difficulty for consumers to find options that combine all nutritional recommendation, while also being economically accessible, convenient, and conforming to their taste and cultural preferences \cite{Green2015}. 

To achieve a truly smart dietary assistant, given a vast amount of information about users, their habits and goals, we should be able to recommend an effective strategy to achieve the latter by analysing their choices in the former. As Gregori (2017)\cite{Gregori} describes, the architecture of a chatbot requires four components: a front end, a knowledge base, a back end and a corpus. While there are many tools that can be used for chatbot front end and back end, finding an appropriate corpus and generating a knowledge base are domain specific tasks, with far less options available. 

Even for a restricted dietary task such as reducing fat consumption, current AI expert systems are based off a set of handcrafted rules \cite{Prochaska2005}, and more generally require experts in the field (``knowledge engineers'') to add in known facts \cite{Chen2012}. While the medical community has made efforts to solidify their field into knowledge bases, there are no prevailing standards to read and interpret them, and although some attempts have been made to use knowledge graph representation to power a symptoms identifying chatbot \cite{minutoloa2017conversational}, there does not seem to be a canonical dietary knowledge base. Current commercial apps use a combined approach of total calorie counts and macro/micro nutrient percentages, but this is often insufficient to initiate healthy behaviours \cite{Davis2016}.

Despite the criticism for the occasional sensationalism, the emerging field of dietary epidemiology advocates a holistic approach to nutrition studies, by taking into account genetic, lifestyle and metabolic information as much as dietary records, making the mere tracking insufficient to draw anything but the most casual inferences on the users' health \cite{byers2001food}. \\
However, until this branch of the field develops enough to provide us with effective personalised nutrition (though some recent startups would like us to believe they already provide that option \cite{habitwebsite}), it is possible to use a more restricted approach based on recognising unbalanced diets from the lack or excess of certain key nutrients, abstracting the mechanics of quantifying exact measures from the users by providing more immediate advice through food recommendation. Data analysis techniques on food composition can be used to draw networks of complementary foods (foods that together fulfil nutritional needs) \cite{Kim2015a}, which could be used to give suggestions based on what users have already eaten. \\
There are plenty of choices for nutritional value composition datasets (the most popular compiled from the United States Department of Agriculture \cite{usda}), and free or commercial APIs \cite{foodapis}.
\subsection{Leveraging social connections}
Success in activity tracking is influenced by demographics, with older and lower income subjects having lower rates of initial activation and retention \cite{Patel2017}. This problem may be caused by the bespoke user interface each fitness tracker comes with, which we believe a universal chat interface will alleviate. However, there are other factors worth considering for integration. 

Popular fitness tracking apps often provide social networking functionalities, which have helped participants achieve their fitness goal through a combination of competition with their peers and social accountability \cite{chenchen2014}. Gamification has also proven useful \cite{doi:10.1001/jamainternmed.2017.3458}, and so has financial involvement, but only when profiled as a loss and not for modest gains \cite{doi:10.7326/M15-1635}. \\
One company who successfully integrated diet tracking with all these aspects (gamification, monetary incentives and social accountability) was Gym-Pact (later Pact app), which rewarded users for tracking their calories, eating enough fruits and vegetables, and exercising, but took money from them if they didn't, and allowed users to post their progress to social media and compare it with their peers. The app reached a sufficiently large number of participants \cite{nudgingpracticioner} to sustain itself for several years, and a high percentage of users was frequently able to achieve their goals without cheating thanks to progress reviews from other users \footnote{Unfortunatelyt their business model was not profitable enough, and they closed in Summer 2017.}

\section{Image recognition}
Most messaging apps today come with media functionality integrated; in particular, it is easy to take pictures and send them as a message from within the app itself. A diet tracking chatbot might benefit from the users' ability to take pictures of their meals and instantaneously receive feedback on their nutritional value. While, to the best of our knowledge, this has never been attempted within a chatbot interface, photographic diet diaries have complemented food logging for many years, both in a traditional paper form to aid recollection \cite{Higgins2009}, and, more recently, electronically. For most of the photographic food logging apps, portion size estimation requires placing a fiducial marker, an object with a distinctively recognisable pattern, in the frame of the image, to enable fitting a geometrical model on the entire picture \cite{Ahmad2016}. A slight twist on this has been given by Smartplate, a startup that uses a distinctively shaped plate to implement image based food tracking \cite{smartplate}.

A different approach was used by Google research with the \textit{Im2Calories} Android app \cite{Myers2015}. Besides using a Convolutional Neural Network based off a newly collected multilabel dataset to classify what the food in the picture is, different CNNs are also used to segment images and to estimate their 3D volumetry. This allows the app to assign calorie counts to images that contain different foods in the same plate, and to have more precise estimation of size. Unfortunately, neither the app nor the datasets have been publicly released.\\
More recently, small startups like \textit{Calorie Mama} \cite{caloriemamaai} and \textit{Bitesnap} \cite{bitesnap}, as well as Samsung's digital assistant \textit{Bixby} \cite{bixbyarticle}, have also implemented similar functionality, although it is still not clear how their models were trained or how effective they will be. 

Among social media users, especially on the Instagram photo sharing platform, it's common to photograph images of aesthetically pleasing food. While this does by no mean provide an exhaustive nutritional history, it can be used as a further automation to save users from having to manually log their meals and extract nutritional information, as well as another potential avenue to establish social accountability to log healthy food \cite{Sharma:2015:MCN:2740908.2742754}. Computer vision algorithms would still be required to analyse the images, because Instagram tags are unreliable in identifying the content of the picture due to the large number of slang-related false positives \cite{hospedales2016}.
%% issues with image recognition????
